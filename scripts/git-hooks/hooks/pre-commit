#!/usr/bin/env bash
# Protection check for TiptapEditor vendor directory
# Runs before pre-commit framework hooks

HERE="$(cd "$(dirname "$0")" && pwd)"
REPO_ROOT="$(cd "$HERE/../../.." && pwd)"
PROTECTION_SCRIPT="$REPO_ROOT/scripts/git-hooks/prevent-tiptap-changes.sh"

# Run our protection check first
if [ -f "$PROTECTION_SCRIPT" ] && [ -x "$PROTECTION_SCRIPT" ]; then
	"$PROTECTION_SCRIPT" || exit $?
fi

# Then run pre-commit framework if available
if command -v pre-commit >/dev/null 2>&1; then
	exec pre-commit run --hook-stage pre-commit "$@"
fi

exit 0
